
All Discrete Global Grid Systems (DGGS) are structured for information
as distinct from conventional coordinate reference systems originally
designed for navigation.
For a grid based global spatial information system to operate effectively
as an analytical system it should be constructed using cells that
represent the surface of the Earth in a uniform way.
This ensures that, at each resolution,
all cells have the same probability of contributing to an analysis.
An Equal Area DGGS is a spatial reference system that uses a hierarchy
of equal area tessellations to partition the surface of the Earth into grid cells
or their analogous lattice points.
In this way, information recorded about phenomena at a location
can be easily referenced to the explicit area of the associated cell,
integrated with other cell values,
and provides statistically valid summaries based on any chosen selection of cells.
With equal area partitioning, spatial analysis can be
replicated consistently anywhere on the Earth independent of resolution or scale.

Equal Area Earth DGGS reference systems are polyhedral reference systems
on the surface of a base unit polyhedron's circumscribed ellipsoid.
The base unit polyhedron's location and orientation is defined in
Earth Centered (EC) coordinates.
The initial equal area tessellation of the chosen ellipsoidal Earth model is constructed by scaling a unit polyhedron of defined orientation until its vertices all touch the
ellipsoid and connecting adjoining vertices with arcs selected from the set of permitted arcs, the simplest of which are geodesic, small circle or small ellipse arcs.
Appropriate differential scaling is applied to the unit polyhedron to ensure an equal area initial tessellation.
For the simple case of regular polyhedra and geodesic (i.e. great circle) arcs on its circumscribed spheroid, the scaling is uniform.
<<figureB-1>> illustrates their simplest form using a regular spherical polyhedron with a spheroidal circumscribing ellipsoid and geodesic arcs.
Small circle arcs are typically used to construct arcs along lines of latitude for both ellipsoids and spheroids.
Both small circle and small ellipse arcs are formed from the intersection of a defined plane with the ellipsoid, and in that sense they can be considered equivalent to the "`straight`" lines of two-dimensional cell boundaries.
More complex forms of straight line, such as arcs that project to a straight line in an equal area projection are also allowed.

[[figureB-1]]
.Regular polyhedra (top) and their corresponding initial equal area tessellation (bottom)
image::figures/Fig_annex_B1.png[align="center"]

Note:: a) tetrahedron, b) cube, c) octahedron, d) icosahedron and e) dodecahedron. [<<ref1>>, Figure 2]

There is a gap between conventional coordinate reference systems and the reference system needed to define DGGSs.
This document fills the gap in existing ISO standard reference systems and establishes requirements for globally interoperable equal-area cell- or lattice-based information frameworks.

Existing spatial CRS (e.g. ECEF [Earth Centered Earth Fixed], WGS 84 or Web Mercator) build grids from projected Cartesian or ellipsoidal coordinate axes.
Rectangular planar grids are typically formed by establishing a set of regular ticks on a pair of linear axes
with grids cells being formed by the intersection of straight lines drawn normal to the ticks on each axis.
Analogous construction techniques can be used to create triangular or hexagonal grids.
The properties of grids built this way arise from the premise of planar geometry and not the curved geometry of the surface of a sphere or ellipsoid.
While these properties hold true at local scales, in curved geometries they increasingly fail at progressively larger regions of interest (see <<figureB-2>>).
Take for example the assumption that a grid cell's geometric properties are independent of its size or resolution, which
is implicit in constructing sets of planar aligned (or 'nested') 10 m, 30 m and 90 m grids.
As shown in <<figureB-3>>, a 90 m square cell formed from nine 30 m square child cells has the following properties:

[loweralpha]
. It is also square;
. Its edges are three times the edge length of its 30 m child cells, which in turn all are three times the edge length of their 10 m child cells;
. Its interior angles are all right angles and identical to the interior angles of all of the child cells;
. Its edges follow the shortest linear path between neighbouring cell vertices; and,
. The angles or bearings from centroid to centroid between cells are preserved irrespective of the direction of travel.

[[figureB-2]]
.Comparison of a grid (in this case radial) represented on both (a) curved and (b) planar surfaces.
image::figures/Fig_annex_B2.png[align="center"]

Note:: With increasing distance away from the point P there is an increasing deviation between the two representations of the grid [<<ref2>>, Fig. 15; <<ref47>>, Fig. 3].

[[figureB-3]]
.Planar square grid with nested child cells.
image::figures/Fig_annex_B3.png[align="center"]

Note:: The red and yellow cells have identical geometry, and in each case the geometry is also shared with all other cells of the same size.

On a curved surface, however, this is never the case. Yet we often make the same assumption;
that all cells are geometrically identical in, for example, a country- or continental-wide mosaic comprising many satellite images.
Consequently, under this paradigm assumption, choosing a fixed cell size for a global grid whose cells represent equal areas and seamlessly fit the earth's surface is problematic.
When this is required, conventional spatial standards enforce latitude-longitude axes to be used and these grids are therefore described in these spherical coordinates.
But the cells of these types of (equal-angular) grids do not have the same properties of planar grids.
<<figureB-4>> shows a similar consideration to that of <<figureB-3>>, only the grids are constructed using spherical instead of planar Cartesian coordinates.
In this scenario, the largest (parent) cell does not necessarily have the same shape or internal angles as the child cells.
Also, its edges do not follow the shortest linear path from corner to corner.
Bearing directions between cell centroids, however, are preserved in both planar and curved geometry spaces.

[[figureB-4]]
.Geometries and spatial properties of cells on curved surfaces.
image::figures/Fig_annex_B4.png[align="center"]

Note:: a) square grid with nested child cells on a portion of a sphere (projected from the planar grid shown in <<figureB-3>>), +
b) Latitude-longitude (equal angular) grid, the red cell is 90^o^ x 90^o^ and has nine 30^o^ x 30^o^ child cells (the central child cell is shown in yellow).

In an attempt to address this dichotomy, conventional spatial standards therefore support either small. local, well-behaved planar grids or
global grids that preserve bearings and angular lengths, and do not preserve area,
but not both at the same time.
This document fills this gap by providing a formal specification for area preserving reference systems based on the surface model of the Earth
that respect the accuracy and precision of spatial data at all scales from local to global.
These systems use a hierarchical tessellation of the entire Earth to produce equal-area grids.
<<figureB-5>> shows two examples.
We anticipate that future extensions of the specifications in this document will support higher dimensions,
such as the volume of the Earth and its atmosphere, and the Earth through time.

[[figureB-5]]
.Tessellations of the Earth to equal-area cells.
image::figures/Fig_annex_B5.png[align="center"]

Note:: Left: Triangular cells starting with an icosahedron.
Then refining each cell recursively into 9 smaller cells. Shown after two iterations. +
Right: Hexagonal cells with twelve pentagonal cells at the vertices of the initial tessellation


The language and foundations of current geospatial standards are deeply rooted in planar thinking,
so while this document leverages as much as it can from existing standards,
it also introduces new concepts that are subtly and yet fundamentally, different from those described by the standards that it draws from.
These subtle differences challenge our thinking.
As a consequence, this document is an evolution of both existing raster processing practice and past usage of discrete global grids.

As a specification for an area preserving earth reference system, this document defines more than just grids and lattices.
The underlying geometry of the cells and the topological relationships between neighbouring cells can be used to define GUIDs for the cells across all resolution.

Earlier, we noted that planar grids are formed from the pairs of axes each with regular ticks corresponding to the cell dimension,
facilitating a simple topological referencing schema for each cell
(usually via a matrix style index for each cell along the axes of the grid, i.e. rows and columns for a two-dimensional grid).
With DGGSs, we introduce a more sophisticated set of cell referencing schemas,
such as space filling curves which traverse all of the cells in a manner that is functionally equivalent to the axes.
As shown in <<figureB-6>>, cell indices are assigned to cells along the path of the space filling curve.
These indices, together with the geometry of the space filling curve, carry the metrics of
the curved surface and the topological relationships between neighbouring cells.
The cell indices are explicitly treated as GUIDs.

[[figureB-6]]
.Using Morton space filling curve for defining.
image::figures/Fig_annex_B6.png[align="center"]

Note:: Labels of 4x4 square cells. (after [<<ref2>>, Fig. 25])

The mathematical properties of integers and real numbers on axis pairs in a plane are known implicitly and
are therefore not part of any ISO document concerning planar grids.
The theoretical basis on which the separate disciplines for space filling curves, GUIDs, grids,
spatial topology and discrete global grids are also well founded.
However, their roles in DGGSs are not implicitly understood.
This document therefore defines these roles and relationships explicitly.
This is a necessary departure from previous DGGS work that is needed to ensure a robust spatial reference frame standard.
A brief history of DGGSs is provided in <<AnnexC>> for reference.
